(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AdminOrders"],{"3b16":function(t,e,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("0481"),i("caad"),i("2b0e")),a=i("9c40"),o=i("27f9"),r=i("b7fa"),l=i("87e8"),u=i("d882"),h=i("7937"),c=i("d728"),d=i("0cd3");e["a"]=s["a"].extend({name:"QPagination",mixins:[r["a"],l["a"]],props:{value:{type:Number,required:!0},min:{type:Number,default:1},max:{type:Number,required:!0},color:{type:String,default:"primary"},textColor:String,activeColor:String,activeTextColor:String,inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},maxPages:{type:Number,default:0,validator:function(t){return t>=0}},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,dense:Boolean,padding:{type:String,default:"3px 2px"}},data:function(){return{newPage:null}},watch:{min:function(){this.model=this.value},max:function(){this.model=this.value}},computed:{model:{get:function(){return this.value},set:function(t){if(t=parseInt(t,10),!this.disable&&!isNaN(t)){var e=Object(h["a"])(t,this.min,this.max);this.$emit("input",e)}}},inputPlaceholder:function(){return this.model+" / "+this.max},__boundaryLinks:function(){return this.__getBool(this.boundaryLinks,this.input)},__boundaryNumbers:function(){return this.__getBool(this.boundaryNumbers,!this.input)},__directionLinks:function(){return this.__getBool(this.directionLinks,this.input)},__ellipses:function(){return this.__getBool(this.ellipses,!this.input)},icons:function(){var t=[this.iconFirst||this.$q.iconSet.pagination.first,this.iconPrev||this.$q.iconSet.pagination.prev,this.iconNext||this.$q.iconSet.pagination.next,this.iconLast||this.$q.iconSet.pagination.last];return!0===this.$q.lang.rtl?t.reverse():t},attrs:function(){if(!0===this.disable)return{"aria-disabled":"true"}},btnProps:function(){return{round:this.round,rounded:this.rounded,outline:this.outline,unelevated:this.unelevated,push:this.push,glossy:this.glossy,dense:this.dense,padding:this.padding,color:this.color,flat:!0,size:this.size,ripple:null===this.ripple||this.ripple}},activeBtnProps:function(){return{flat:this.flat,color:this.activeColor||this.color,textColor:this.activeTextColor||this.textColor}}},methods:{set:function(t){this.model=t},setByOffset:function(t){this.model=this.model+t},__update:function(){this.model=this.newPage,this.newPage=null},__getBool:function(t,e){return[!0,!1].includes(t)?t:e},__getBtn:function(t,e,i,s){var o=this;return e.props=Object(n["a"])(Object(n["a"])({},this.btnProps),i),void 0!==s&&(void 0!==this.toFn?e.props.to=this.toFn(s):e.on={click:function(){return o.set(s)}}),t(a["a"],e)}},render:function(t){var e=this,i=[],s=[],a=[];if(this.__boundaryLinks&&(i.push(this.__getBtn(t,{key:"bls"},{disable:this.disable||this.value<=this.min,icon:this.icons[0]},this.min)),s.unshift(this.__getBtn(t,{key:"ble"},{disable:this.disable||this.value>=this.max,icon:this.icons[3]},this.max))),this.__directionLinks&&(i.push(this.__getBtn(t,{key:"bdp"},{disable:this.disable||this.value<=this.min,icon:this.icons[1]},this.value-1)),s.unshift(this.__getBtn(t,{key:"bdn"},{disable:this.disable||this.value>=this.max,icon:this.icons[2]},this.value+1))),!0===this.input)a.push(t(o["a"],{staticClass:"inline",style:{width:"".concat(this.inputPlaceholder.length/1.5,"em")},props:{type:"number",dense:!0,value:this.newPage,disable:this.disable,dark:this.isDark,borderless:!0,inputClass:this.inputClass,inputStyle:this.inputStyle},attrs:{placeholder:this.inputPlaceholder,min:this.min,max:this.max},on:Object(d["b"])(this,"inp",{input:function(t){e.newPage=t},keyup:function(t){!0===Object(c["a"])(t,13)&&e.__update()},blur:this.__update})}));else{var r=Math.max(this.maxPages,1+(this.__ellipses?2:0)+(this.__boundaryNumbers?2:0)),l=this.min,h=this.max,p=!1,m=!1,b=!1,f=!1;this.maxPages&&r<this.max-this.min+1&&(r=1+2*Math.floor(r/2),l=Math.max(this.min,Math.min(this.max-r+1,this.value-Math.floor(r/2))),h=Math.min(this.max,l+r-1),this.__boundaryNumbers&&(b=!0,l+=1),this.__ellipses&&l>this.min+(this.__boundaryNumbers?1:0)&&(p=!0,l+=1),this.__boundaryNumbers&&(f=!0,h-=1),this.__ellipses&&h<this.max-(this.__boundaryNumbers?1:0)&&(m=!0,h-=1));var g={minWidth:"".concat(Math.max(2,String(this.max).length),"em")};if(b){var _=this.min===this.value,v={disable:this.disable,flat:!_,label:this.min};_&&(v.color=this.activeColor||this.color,v.textColor=this.activeTextColor||this.textColor),i.push(this.__getBtn(t,{key:"bns",style:g},v,this.min))}if(f){var y=this.max===this.value,x={disable:this.disable,flat:!y,label:this.max};y&&(x.color=this.activeColor||this.color,x.textColor=this.activeTextColor||this.textColor),s.unshift(this.__getBtn(t,{key:"bne",style:g},x,this.max))}p&&i.push(this.__getBtn(t,{key:"bes",style:g},{disable:this.disable,label:"…",ripple:!1},l-1)),m&&s.unshift(this.__getBtn(t,{key:"bee",style:g},{disable:this.disable,label:"…",ripple:!1},h+1));for(var B=l;B<=h;B++){var k={disable:this.disable,flat:!0,label:B};B===this.value&&Object.assign(k,this.activeBtnProps),a.push(this.__getBtn(t,{key:"bpg".concat(B),style:g},k,B))}}return t("div",{staticClass:"q-pagination row no-wrap items-center",class:{disabled:this.disable},attrs:this.attrs,on:Object(n["a"])({},this.qListeners)},[i,t("div",{staticClass:"row justify-center",on:!0===this.input?Object(d["b"])(this,"stop",{input:u["k"]}):null},[a]),s])}})},ec5c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"AdminOrders"}},[i("div",{staticClass:"q-px-md"},[t._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("q-table",{attrs:{flat:"",bordered:"",data:t.orders,columns:t.columns,"row-key":"name",pagination:t.pagination,"hide-pagination":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body-cell-name",fn:function(e){return[i("q-td",{attrs:{props:e}},[t._v(t._s(e.row.user.name))])]}},{key:"body-cell-product",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("ul",t._l(e.row.products,(function(e){return i("li",[t._v(t._s(e.product.name)+" * "+t._s(e.amount))])})),0)])]}},{key:"body-cell-price",fn:function(e){return[i("q-td",{attrs:{props:e}},[t._v(t._s(e.row.products.reduce((function(t,e){return t+e.amount*e.product.price}),0)))])]}}])}),i("div",{staticClass:"row justify-center q-mt-md"},[i("q-pagination",{attrs:{max:t.pagesNumber,color:"grey-8",size:"sm"},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("h4",[t._v("訂單管理")])])}],a=i("1da1"),o=(i("96cf"),i("d81d"),{name:"AdminOrders",data:function(){return{orders:[],columns:[{name:"name",field:"name",align:"center",label:"訂購者"},{name:"_id",field:"_id",align:"center",label:"訂單編號"},{name:"date",field:"date",align:"center",label:"訂單日期"},{name:"product",field:"product",align:"center",label:"訂單內容"},{name:"price",field:"price",align:"center",label:"訂單金額"}],pagination:{sortBy:"image",descending:!1,page:1,rowsPerPage:10}}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/orders/all",{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:i=e.sent,n=i.data,t.orders=n.result.map((function(t){return t.date=new Date(t.date).toLocaleDateString(),t})),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:"取得訂單失敗"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),r=o,l=i("2877"),u=i("eaac"),h=i("db86"),c=i("3b16"),d=i("93dc"),p=i.n(d),m=Object(l["a"])(r,n,s,!1,null,null,null);e["default"]=m.exports;p()(m,"components",{QTable:u["a"],QTd:h["a"],QPagination:c["a"]})}}]);
//# sourceMappingURL=AdminOrders.fd999949.js.map