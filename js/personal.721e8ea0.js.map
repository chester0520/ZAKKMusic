{"version":3,"sources":["webpack:///./node_modules/quasar/src/components/form/QForm.js","webpack:///./src/views/Personal.vue?e68a","webpack:///src/views/Personal.vue","webpack:///./src/views/Personal.vue?3a96","webpack:///./src/views/Personal.vue"],"names":["Vue","extend","name","mixins","ListenersMixin","props","autofocus","Boolean","noErrorFocus","noResetFocus","greedy","computed","onEvents","this","qListeners","submit","reset","mounted","validateIndex","focus","methods","validate","shouldFocus","promises","components","getValidationComponents","emit","res","ref","$emit","i","comp","valid","then","push","error","Promise","resolve","length","index","all","errors","filter","r","resetValidation","forEach","evt","stopAndPrevent","val","target","$nextTick","addFocusFn","$el","querySelector","Array","prototype","find","call","querySelectorAll","el","tabIndex","map","getElementsByClassName","field","__vue__","c","render","h","staticClass","on","slot","_vm","_h","$createElement","_c","_self","attrs","_v","model","value","form","callback","$$v","$set","expression","staticRenderFns","data","account","phone","address","_id","component","QForm","QInput","QBtn"],"mappings":"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","file":"js/personal.721e8ea0.js","sourcesContent":["import Vue from 'vue'\n\nimport ListenersMixin from '../../mixins/listeners.js'\n\nimport { stopAndPrevent } from '../../utils/event.js'\nimport { slot } from '../../utils/slot.js'\nimport { addFocusFn } from '../../utils/focus-manager.js'\n\nexport default Vue.extend({\n  name: 'QForm',\n\n  mixins: [ ListenersMixin ],\n\n  props: {\n    autofocus: Boolean,\n    noErrorFocus: Boolean,\n    noResetFocus: Boolean,\n    greedy: Boolean\n  },\n\n  computed: {\n    onEvents () {\n      return {\n        ...this.qListeners,\n        submit: this.submit,\n        reset: this.reset\n      }\n    }\n  },\n\n  mounted () {\n    this.validateIndex = 0\n    this.autofocus === true && this.focus()\n  },\n\n  methods: {\n    validate (shouldFocus) {\n      const promises = []\n      const focus = typeof shouldFocus === 'boolean'\n        ? shouldFocus\n        : this.noErrorFocus !== true\n\n      this.validateIndex++\n\n      const components = this.getValidationComponents()\n\n      const emit = (res, ref) => {\n        this.$emit('validation-' + (res === true ? 'success' : 'error'), ref)\n      }\n\n      for (let i = 0; i < components.length; i++) {\n        const comp = components[i]\n        const valid = comp.validate()\n\n        if (typeof valid.then === 'function') {\n          promises.push(\n            valid.then(\n              valid => ({ valid, comp }),\n              error => ({ valid: false, comp, error })\n            )\n          )\n        }\n        else if (valid !== true) {\n          if (this.greedy === false) {\n            emit(false, comp)\n\n            if (focus === true && typeof comp.focus === 'function') {\n              comp.focus()\n            }\n\n            return Promise.resolve(false)\n          }\n\n          promises.push({ valid: false, comp })\n        }\n      }\n\n      if (promises.length === 0) {\n        emit(true)\n        return Promise.resolve(true)\n      }\n\n      const index = this.validateIndex\n\n      return Promise.all(promises).then(\n        res => {\n          if (index === this.validateIndex) {\n            const errors = res.filter(r => r.valid !== true)\n\n            if (errors.length === 0) {\n              emit(true)\n              return true\n            }\n\n            const { valid, comp } = errors[0]\n\n            emit(false, comp)\n\n            if (\n              focus === true &&\n              valid !== true &&\n              typeof comp.focus === 'function'\n            ) {\n              comp.focus()\n            }\n\n            return false\n          }\n        }\n      )\n    },\n\n    resetValidation () {\n      this.validateIndex++\n\n      this.getValidationComponents().forEach(comp => {\n        typeof comp.resetValidation === 'function' && comp.resetValidation()\n      })\n    },\n\n    submit (evt) {\n      evt !== void 0 && stopAndPrevent(evt)\n\n      this.validate().then(val => {\n        if (val === true) {\n          if (this.qListeners.submit !== void 0) {\n            this.$emit('submit', evt)\n          }\n          else if (evt !== void 0 && evt.target !== void 0 && typeof evt.target.submit === 'function') {\n            evt.target.submit()\n          }\n        }\n      })\n    },\n\n    reset (evt) {\n      evt !== void 0 && stopAndPrevent(evt)\n\n      this.$emit('reset')\n\n      this.$nextTick(() => { // allow userland to reset values before\n        this.resetValidation()\n        if (this.autofocus === true && this.noResetFocus !== true) {\n          this.focus()\n        }\n      })\n    },\n\n    focus () {\n      addFocusFn(() => {\n        if (!this.$el) { return }\n\n        const target = this.$el.querySelector('[autofocus], [data-autofocus]') ||\n          Array.prototype.find.call(this.$el.querySelectorAll('[tabindex]'), el => el.tabIndex > -1)\n\n        target !== null && target !== void 0 && target.focus()\n      })\n    },\n\n    getValidationComponents () {\n      return Array.prototype.map.call(\n        this.$el.getElementsByClassName('q-validation-component'),\n        field => field.__vue__\n      ).filter(c => c !== void 0 && typeof c.validate === 'function')\n    }\n  },\n\n  render (h) {\n    return h('form', {\n      staticClass: 'q-form',\n      on: this.onEvents\n    }, slot(this, 'default'))\n  }\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"Personal\"}},[_c('div',{staticClass:\"q-pa-md\"},[_c('h4',[_vm._v(\"個人資料\")]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col q-mx-xl\"},[_c('q-form',{staticClass:\"q-gutter-md\",on:{\"submit\":_vm.submit}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('p',{staticClass:\"q-pr-xl text-right\"},[_vm._v(\"帳號\")])]),_c('div',{staticClass:\"col-4\"},[_c('q-input',{attrs:{\"outlined\":\"\",\"readonly\":\"\"},model:{value:(_vm.form.account),callback:function ($$v) {_vm.$set(_vm.form, \"account\", $$v)},expression:\"form.account\"}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('p',{staticClass:\"q-pr-xl text-right\"},[_vm._v(\"姓名\")])]),_c('div',{staticClass:\"col-4\"},[_c('q-input',{attrs:{\"outlined\":\"\",\"rules\":[ function (val) { return val.length > 0 || '姓名不能為空'; }]},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('p',{staticClass:\"q-pr-xl text-right\"},[_vm._v(\"電話\")])]),_c('div',{staticClass:\"col-4\"},[_c('q-input',{attrs:{\"outlined\":\"\",\"rules\":[ function (val) { return val.length === 10 || '電話最多或最少 10 個字'; }]},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('p',{staticClass:\"q-pr-xl text-right\"},[_vm._v(\"地址\")])]),_c('div',{staticClass:\"col-4\"},[_c('q-input',{attrs:{\"outlined\":\"\",\"rules\":[ function (val) { return val.length > 0 || '地址不能為空'; }]},model:{value:(_vm.form.address),callback:function ($$v) {_vm.$set(_vm.form, \"address\", $$v)},expression:\"form.address\"}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"}),_c('div',{staticClass:\"col-4\"},[_c('q-btn',{staticClass:\"q-my-lg\",attrs:{\"color\":\"primary\",\"label\":\"確認修改\",\"type\":\"negative\"}})],1)])])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n#Personal\n  .q-pa-md\n    h4 個人資料\n    .row\n      .col.q-mx-xl\n        q-form.q-gutter-md(@submit='submit')\n          .row\n            .col-2\n              p.q-pr-xl.text-right 帳號\n            .col-4\n              q-input(outlined readonly v-model=\"form.account\")\n          .row\n            .col-2\n              p.q-pr-xl.text-right 姓名\n            .col-4\n              q-input(outlined v-model=\"form.name\" :rules=\"[ val => val.length > 0 || '姓名不能為空']\")\n          .row\n            .col-2\n              p.q-pr-xl.text-right 電話\n            .col-4\n              q-input(outlined v-model=\"form.phone\" :rules=\"[ val => val.length === 10 || '電話最多或最少 10 個字']\")\n          .row\n            .col-2\n              p.q-pr-xl.text-right 地址\n            .col-4\n              q-input(outlined v-model=\"form.address\" :rules=\"[ val => val.length > 0 || '地址不能為空']\")\n          .row\n            .col-2\n            .col-4\n              q-btn.q-my-lg(color=\"primary\" label=\"確認修改\" type=\"negative\")\n</template>\n\n<script>\nexport default {\n  name: 'personal',\n  data () {\n    return {\n      form: {\n        account: '',\n        name: '',\n        phone: '',\n        address: '',\n        _id: ''\n      }\n    }\n  },\n  methods: {\n    async submit () {\n      try {\n        const { data } = await this.axios.patch('/users/' + this.form._id, this.form, {\n          headers: {\n            authorization: 'Bearer ' + this.$store.state.jwt.token\n          }\n        })\n        this.form.name = data.result.name\n        this.form.phone = data.result.phone\n        this.form.address = data.result.address\n        this.$swal({\n          icon: 'success',\n          title: '成功',\n          text: '修改個人資料'\n        })\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '錯誤',\n          text: error.response.data.message\n        })\n      }\n    }\n  },\n  async mounted () {\n    try {\n      const { data } = await this.axios.get('/users', {\n        headers: {\n          authorization: 'Bearer ' + this.$store.state.jwt.token\n        }\n      })\n      this.form.account = data.result.account\n      this.form.name = data.result.name\n      this.form.phone = data.result.phone\n      this.form.address = data.result.address\n      this.form._id = data.result._id\n    } catch (error) {\n      console.log(error)\n      this.$swal({\n        icon: 'error',\n        title: '錯誤',\n        text: '取得個人資料失敗'\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Personal.vue?vue&type=template&id=3c8d4e0f&lang=pug&\"\nimport script from \"./Personal.vue?vue&type=script&lang=js&\"\nexport * from \"./Personal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QForm from 'quasar/src/components/form/QForm.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QForm,QInput,QBtn});\n"],"sourceRoot":""}